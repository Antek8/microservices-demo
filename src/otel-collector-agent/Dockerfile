FROM otel/opentelemetry-collector-contrib:0.49.0

ARG NEW_RELIC_API_KEY
ARG OTEL_EXPORTER_OTLP_ENDPOINT
ARG OTEL_RESOURCE_ATTRIBUTES

ENV NEW_RELIC_API_KEY=${NEW_RELIC_API_KEY}
ENV OTEL_EXPORTER_OTLP_ENDPOINT=${OTEL_EXPORTER_OTLP_ENDPOINT}
ENV OTEL_RESOURCE_ATTRIBUTES=${OTEL_RESOURCE_ATTRIBUTES}

COPY ./collector.yaml /etc/otel/config.yaml

CMD ["/otelcol-contrib", "--config=/etc/otel/config.yaml"]
